[
  {
    "name": "http_request_duration_seconds",
    "help": "The response time of requests",
    "type": "Summary",
    "labelNames": [
      { "key": "method", "path": [ "req", "method" ] },
      { "key": "code", "path": [ "res", "status" ] },
      { "key": "path", "path": [ "_matchedRoute" ] }
    ],
    "mark": {
      "method": "observe",
      "path": [ "res", "responseTime" ]
    }
  },
  {
    "name": "http_request_duration_hist_seconds",
    "help": "The response time of requests",
    "type": "Histogram",
    "labelNames": [
      { "key": "method", "path": [ "req", "method" ] },
      { "key": "code", "path": [ "res", "status" ] },
      { "key": "path", "path": [ "_matchedRoute" ] }
    ],
    "mark": {
      "method": "observe",
      "path": [ "res", "responseTime" ]
    },
    "buckets": {
      "type": "exponential",
      "start": 100,
      "buckets": 10,
      "factor": 2
    }
  },
  {
    "name": "http_error_count",
    "help": "The number of errors happening per response",
    "type": "Histogram",
    "labelNames": [
      { "key": "method", "path": [ "req", "method" ] },
      { "key": "code", "path": [ "res", "status" ] },
      { "key": "path", "path": [ "_matchedRoute" ] }
    ],
    "mark": {
      "method": "observe",
      "path": [ "state", "errorsCount" ]
    },
    "buckets": {
      "type": "linear",
      "start": 0,
      "buckets": 10,
      "factor": 1
    }
  },
  {
    "name": "http_content_length_bytes",
    "help": "The size of the payload being sent from the server",
    "type": "Histogram",
    "labelNames": [
      { "key": "path", "path": [ "_matchedRoute" ] }
    ],
    "mark": {
      "method": "observe",
      "path": [ "res", "length" ]
    },
    "buckets": {
      "type": "linear",
      "start": 15000,
      "buckets": 15,
      "factor": 10000
    }
  }, 
  {
    "name": "http_requests_total",
    "help": "The total number of requests served",
    "labelNames": [
      { "key": "method", "path": [ "req", "method" ] },
      { "key": "code", "path": [ "res", "statusBucket" ] },
      { "key": "path", "path": [ "_matchedRoute" ] }
    ],
    "type": "Counter",
    "mark": { "method": "inc", "amount": 1 }
  },
  {
    "name": "upstream_requests_total",
    "help": "The total number of upstream requests made",
    "labelNames": [
      { "key": "method", "path": [ "res", "config", "method" ] },
      { "key": "code", "path": [ "res", "status" ] },
      { "key": "path", "path": [ "path" ] },
      { "key": "remote", "path": [ "remote" ] },
      { "key": "cache", "path": [ "cache", "hit" ] }
    ],
    "type": "Counter",
    "mark": { "id": "upstreamCache", "method": "inc", "amount": 1 }
  },
  {
    "name": "upstream_cache_size",
    "help": "The number of entries within a cache",
    "type": "Gauge",
    "mark": { "id": "upstreamCache", "method": "set", "path": [ "cache", "length" ] }
  },
  {
    "name": "koa_requests_per_second",
    "help": "Number of requests received per second",
    "type": "Meter",
    "mark": { "method": "mark", "amount": 1 }
  },
  {
    "name": "koa_errors_per_second",
    "help": "Number of errors per second per request",
    "type": "Meter"
  }
]
